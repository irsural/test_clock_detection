# Описание

Проект для тестирования алгоритма распознавания времени на аналоговых часах по фотографии

# Установка зависимостей

```commandline
python3 -m pip install '.'
```

# Запуск

Из консоли:

```commandline
python3 -m test_clock_detection
```

Из среды разработки запускать файл **test_clock_detection/\_\_main\_\_.py**


# Структура

## Вход

В папке **files/Изображения** находятся фото часов, которые подаются в программу тестирования.

Имена входных фото должны быть в формате "ЧЧ:ММ:СС.ms.bmp". 
Пример: ``02:01:56.432.bmp``


## Выход

Программа сохраняет выходные файлы в папки **files/Результаты/По шагам** и
**files/Результаты/Окончательные**.

Статистику по успешным обнаружениям выводится в stdout.

### Папка "По шагам"

В папку **По шагам** сохраняются фото в промежуточных состояниях работы алгоритма.
Например, если алгоритм 3 раза фильтрует изображение, а потом находит контуры стрелок, то в папку
**По шагам** можно сохранить 4 фотографии: 3 на разных стадиях фильтрации и одну с обведенными
контурами.

На каждую входную фото, в папке **По шагам** создается отдельная папка с промежуточными
результатами. Имя папки совпадает с именем входного фото.

### Папка "Окончательные"

В папке **Окончательные** сохраняются фото после всех обработок алгоритма. Это удобно для
быстрого сравнения результата работы алгоритмы на разных входных фото.

Имена фото в папке **Окончательные** имеют формат ``success-delta-detected_time-real_time``, где

``success`` - ``1``, если время успешно детектировано, иначе ``1``
``delta`` - разница между реальным временем на часах, и детектированным
``detected_time`` - детектированное время
``real_time`` - реальное время

Параметр ``success`` намеренно расположен в начале имени. При таком формате, все фото с неудачными
определениями времени будут находиться в начале папки с окончательными результатами.

### Статистика успешных обнаружений

Программа рассчитывает статистику успешных обнаружений для заданных отклонений.

Статистика выводится в виде таблицы:

```md
Размер выборки: 10

| Погрешность   | Уложилось в погрешность   |   Количество ошибок |
|---------------|---------------------------|---------------------|
| 0.1 c.        |  60 %                     |                   4 |
| 0.2 c.        |  80 %                     |                   2 |
| 0.3 c.        |  90 %                     |                   1 |
| 0.4 c.        | 0.0 %                     |                   0 |
| 0.5 c.        | 0.0 %                     |                   0 |
| 0.6 c.        | 0.0 %                     |                   0 |
| 0.7 c.        | 0.0 %                     |                   0 |
| 0.8 c.        | 0.0 %                     |                   0 |
| 0.9 c.        | 0.0 %                     |                   0 |
| 1 c.          | 0.0 %                     |                   0 |
```

В данном случае по таблице видно, что из 10 фото, обнаруженное время отличается

- более чем на 0.1 секунду в 4 случаях
- более чем на 0.2 секунду в 2 случаях
- более чем на 0.3 секунду в 1 случаях
- все остальные случаи входят в погрешность 0.4 секунды

## Параметры тестирования

Параметры тестирования находятся в модуле **const.py**. Описание параметров находится там же.
